import"./home.6a421ab4.js";var e=globalThis,t={},n={},a=e.parcelRequire2757;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire2757=a),(0,a.register)("8Wpxu",function(e,t){e.exports=import("6fEqA").then(()=>a("brE3Z"))}),a("6ZWSX"),a("hPtJY");var r=a("72z4V"),i=a("1XYd7"),l=a("2yfk2"),o=a("hPpH6"),s=a("aqcy4"),d=a("xBcsQ"),c=a("le7Hi"),m=a("baa6D");if(r.DefaultAmplify.configure(c&&c.__esModule?c.default:c),(async()=>{let e=window.location.pathname;if(!(e.endsWith("/")||e.endsWith("index.html")||e.includes("verify.html")||e.includes("forgot-password.html")))try{await (0,l.getCurrentUser)()}catch(e){window.location.href=(0,m.getBasePath)()+"index.html"}})(),window.location.pathname.endsWith("/")||window.location.pathname.endsWith("index.html")){let e=document.getElementById("auth-container-animated"),t=document.querySelector(".form-container.sign-in"),n=document.querySelector(".form-container.sign-up");if(window.innerWidth<=768){let e=document.querySelector(".toggle-container");e&&e.remove();let a=document.getElementById("show-login-mobile"),r=document.getElementById("show-signup-mobile");t.style.display="flex",n.style.display="none",r&&r.addEventListener("click",e=>{e.preventDefault(),t.style.display="none",n.style.display="flex"}),a&&a.addEventListener("click",e=>{e.preventDefault(),t.style.display="flex",n.style.display="none"})}else{let t=document.getElementById("register"),n=document.getElementById("login");t&&t.addEventListener("click",()=>e.classList.add("active")),n&&n.addEventListener("click",()=>e.classList.remove("active"))}let a=document.getElementById("signup-password"),r=document.getElementById("strength-meter-container"),i=document.getElementById("strength-bar"),o=document.getElementById("strength-text"),c=document.getElementById("signup-form");a&&(o.textContent="Kayıt Ol",a.addEventListener("input",()=>{let e=a.value,t=[{regex:/.{8,}/,message:"En az 8 karakter"},{regex:/[A-Z]/,message:"Büyük harf (A-Z)"},{regex:/[a-z]/,message:"Küçük harf (a-z)"},{regex:/[0-9]/,message:"Sayı (0-9)"},{regex:/[!@#$%^&*]/,message:"Özel karakter (!@#$%^&*)"}];if(0===e.length){o.textContent="Kayıt Ol",r.classList.remove("transformed"),i.style.width="0%",i.className="strength-bar";return}let n=0,l=null;t.forEach(t=>{t.regex.test(e)?n++:l||(l=t.message)});let s=n/t.length*100;i.style.width=`${s}%`,n===t.length?(o.textContent="Kayıt Ol",r.classList.add("transformed")):(o.textContent=`${n}/${t.length}: ${l||""}`,r.classList.remove("transformed")),i.className="strength-bar",100===s?i.classList.add("strong"):s>=60?i.classList.add("medium"):i.classList.add("weak")}),r.addEventListener("click",()=>{r.classList.contains("transformed")&&c.requestSubmit()}));let g=document.getElementById("login-email"),h=document.getElementById("login-password"),y=document.getElementById("login-button-container"),f=document.getElementById("login-form");function u(){let e=g.value,t=h.value;y.classList.toggle("transformed",e.length>0&&t.length>0)}g&&h&&(g.addEventListener("input",u),h.addEventListener("input",u)),y&&y.addEventListener("click",()=>{y.classList.contains("transformed")&&f.requestSubmit()}),f&&f.addEventListener("submit",async e=>{e.preventDefault();let t=g.value,n=h.value;try{await (0,s.signIn)({username:t,password:n});let{attributes:e}=await (0,l.getCurrentUser)();e["custom:setup_complete"]&&"evet"===e["custom:setup_complete"].toLowerCase()?window.location.href=`${(0,m.getBasePath)()}home.html`:window.location.href=`${(0,m.getBasePath)()}profile-setup.html`}catch(e){console.error("Giriş hatası:",e),h.classList.remove("input-error"),"UserNotConfirmedException"===e.name?window.location.href=`${(0,m.getBasePath)()}verify.html?email=${encodeURIComponent(t)}`:"NotAuthorizedException"===e.name?(h.classList.add("input-error"),setTimeout(()=>h.classList.remove("input-error"),500),alert("Kullanıcı adı veya şifre hatalı.")):alert(e.message)}}),c&&c.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("signup-email").value,n=a.value;try{await (0,d.signUp)({username:t,password:n,attributes:{email:t}}),alert("Hesap başarıyla oluşturuldu! Doğrulama kodu e-postana gönderildi. Spam (gereksiz) klasörünü kontrol etmeyi unutma."),window.location.href=`${(0,m.getBasePath)()}verify.html?email=${encodeURIComponent(t)}`}catch(e){console.error("Kayıt hatası:",e),alert(e.message)}})}if(window.location.pathname.includes("verify.html")&&(async()=>{let{confirmSignUp:e,resendSignUpCode:t}=await a("8Wpxu"),n=document.getElementById("verify-email-display"),r=new URLSearchParams(window.location.search).get("email");r&&(n.textContent=r),document.getElementById("verify-form").addEventListener("submit",async t=>{t.preventDefault();let n=document.getElementById("verification-code").value;if(!r||!n)return alert("E-posta veya doğrulama kodu eksik.");try{await e({username:r,confirmationCode:n}),alert("E-posta başarıyla doğrulandı! Lütfen giriş yapın."),window.location.href=`${(0,m.getBasePath)()}index.html`}catch(e){console.error("Doğrulama hatası:",e),alert(e.message)}});let i=document.getElementById("resend-code-container"),l=["Bu sayfa tamamen güvenlidir.","E-posta ulaşmadıysa spam (gereksiz) klasörünüzü kontrol edin."],o=0;function s(){i.innerHTML=`
            <div id="resend-code-progress"></div>
            <div id="resend-code-text"></div>
        `;let e=document.getElementById("resend-code-progress"),t=document.getElementById("resend-code-text"),n=30;i.classList.remove("ready"),e.style.transition="none",e.style.width="0%";let a=setInterval(()=>{let r=(30- --n)/30*100;e.style.transition="width 1s linear",e.style.width=`${r}%`,t.textContent=`TEKRAR G\xd6NDER (${n}s)`,n<=0&&(clearInterval(a),i.classList.add("ready"),t.textContent="KODU TEKRAR GÖNDER")},1e3)}i.addEventListener("click",async()=>{if(i.classList.contains("ready")){if(!r)return alert("E-posta adresi bulunamadı.");try{await t({username:r}),alert("Doğrulama kodu tekrar gönderildi. Spam (gereksiz) klasörünü kontrol etmeyi unutma."),s()}catch(e){console.error("Kodu tekrar gönderme hatası:",e),alert(e.message)}}else alert(l[o]),o=(o+1)%l.length}),s()})(),window.location.pathname.includes("forgot-password.html")&&(async()=>{let e=document.getElementById("send-code-form"),t=document.getElementById("reset-password-form"),n=document.getElementById("reset-email");e.addEventListener("submit",async r=>{r.preventDefault();try{await (0,o.resetPassword)({username:n.value}),alert("Sıfırlama kodu e-postana gönderildi. Spam (gereksiz) klasörünü kontrol etmeyi unutma."),e.classList.add("hidden"),t.classList.remove("hidden")}catch(e){if(console.error("Şifre sıfırlama hatası:",e),"UserNotConfirmedException"===e.name||"InvalidParameterException"===e.name){let{resendSignUpCode:e}=await a("8Wpxu");try{await e({username:n.value}),alert("Şifrenizi sıfırlamak için önce e-postanızı doğrulamanız gerekiyor. Size yeni bir doğrulama kodu gönderdik, lütfen spam (gereksiz) klasörünüzü kontrol edin."),window.location.href=`${(0,m.getBasePath)()}verify.html?email=${encodeURIComponent(n.value)}`}catch(e){console.error("Doğrulama kodu gönderme hatası:",e),alert("Bir hata oluştu. Lütfen tekrar deneyin.")}}else alert(e.message)}}),t.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("reset-code").value,a=document.getElementById("new-password").value;try{await (0,i.confirmResetPassword)({username:n.value,confirmationCode:t,newPassword:a}),alert("Şifren başarıyla değiştirildi. Şimdi giriş yapabilirsin."),window.location.href=`${(0,m.getBasePath)()}index.html`}catch(e){console.error("Yeni şifre ayarlama hatası:",e),alert(e.message)}})})(),window.location.pathname.includes("home.html")){document.addEventListener("click",e=>{(e.target.matches("#edit-profile-option")||e.target.closest("#edit-profile-option"))&&(e.preventDefault(),window.location.href=`${(0,m.getBasePath)()}profile-setup.html?mode=edit`)});let e=document.getElementById("daily-task-text"),t=document.querySelectorAll(".streak-circle"),n=["Bir sokak hayvanına su ver.","Yaşlı bir komşunun poşetlerini taşımasına yardım et.","Toplu taşımada birine yer ver.","Bugün birine içten bir şekilde iltifat et.","Çevrendeki bir çöpü yere atma, çöp kutusuna at.","Bir arkadaşına nasıl olduğunu sor.","Okuduğun güzel bir kitabı birine hediye et.","Bir fidan dik."];t.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("completed")})});let a=Math.floor(Math.random()*n.length);e.textContent=n[a]}window.location.pathname.includes("profile-setup.html")&&(async()=>{try{let{attributes:e}=await (0,l.getCurrentUser)(),{updateUserAttributes:t}=await a("8Wpxu"),n=new URLSearchParams(window.location.search).get("mode"),r="edit"===n,i=document.querySelectorAll(".setup-step"),o=document.querySelector(".progress-bar-inner"),s=document.querySelector("h1"),d=document.querySelector("p"),c=document.getElementById("step-1-btn"),u=document.getElementById("step-2-btn"),g=document.getElementById("complete-profile-btn"),h=document.querySelector('#step-3-form button[type="submit"]'),y=document.getElementById("name"),f=document.getElementById("birthdate"),p=document.getElementById("gender"),v=document.querySelectorAll(".gender-option"),E=document.querySelectorAll(".preference-card"),k=document.getElementById("interest-counter"),w={instagram:document.getElementById("instagram"),tiktok:document.getElementById("tiktok"),x:document.getElementById("x"),facebook:document.getElementById("facebook"),reddit:document.getElementById("reddit"),linkedin:document.getElementById("linkedin")},B=0,b=[];if(r){for(let t in s.textContent="Profilini Düzenle",d.textContent="Bilgilerini aşağıdan güncelleyebilirsin.",c.textContent="Değişiklikleri Kaydet",u.textContent="Değişiklikleri Kaydet",g.textContent="Vazgeç",h.textContent="Değişiklikleri Kaydet",y.value=e.name||"",f.value=e.birthdate||"",p.value=e.gender||"",e.gender&&v.forEach(t=>{t.dataset.gender===e.gender&&t.classList.add("selected")}),w)w[t]&&(w[t].value=e[`custom:social_${t}`]||"");(e["custom:iyilik_tercihleri"]?e["custom:iyilik_tercihleri"].split(","):[]).forEach(e=>{b.push(e);let t=document.querySelector(`.preference-card[data-preference="${e}"]`);t&&t.classList.add("selected")}),k.textContent=`(${b.length}/6)`}let L=e=>{i.forEach((t,n)=>t.classList.toggle("active",n===e));let t=B/(i.length-1)*100;o.style.width=`${t}%`};v.forEach(e=>{e.addEventListener("click",()=>{v.forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),p.value=e.dataset.gender})}),document.getElementById("step-1-btn").addEventListener("click",()=>{if(y.value.trim()&&f.value&&p.value){if(r)return x(!1);B=1,L(B)}else alert("Lütfen devam etmeden önce tüm alanları doldurun.")}),E.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.preference;b.includes(t)?(b.splice(b.indexOf(t),1),e.classList.remove("selected")):b.length<6?(b.push(t),e.classList.add("selected")):alert("En fazla 6 ilgi alanı seçebilirsiniz."),k.textContent=`(${b.length}/6)`;let n=b.length>=1;u.disabled=!n,g.disabled=!n})}),u.addEventListener("click",()=>{if(b.length>=1){if(r)return x(!1);B=2,L(B)}else alert("Lütfen en az 1 ilgi alanı seçin.")});let x=async(e=!0)=>{try{let n={name:String(y.value),birthdate:String(f.value),gender:String(p.value),"custom:social_instagram":String(w.instagram.value),"custom:social_tiktok":String(w.tiktok.value),"custom:social_x":String(w.x.value),"custom:social_facebook":String(w.facebook.value),"custom:social_reddit":String(w.reddit.value),"custom:social_linkedin":String(w.linkedin.value),"custom:iyilik_tercihleri":String(b.join(",")),"custom:setup_complete":"evet"};await t({userAttributes:n}),e?window.location.href=`${(0,m.getBasePath)()}home.html`:alert("Profilin başarıyla güncellendi!")}catch(e){console.error("Profil güncelleme hatası:",e),alert("Profiliniz güncellenirken bir hata oluştu. Lütfen tekrar deneyin.")}};g.addEventListener("click",()=>{if(r)return window.location.href=`${(0,m.getBasePath)()}home.html`;x(!0)}),document.getElementById("step-3-form").addEventListener("submit",e=>{e.preventDefault(),x(!0)});let I=b.length>=1;u.disabled=!I,g.disabled=!I,L(B)}catch(e){console.error("Authentication error on profile setup page, redirecting.",e),window.location.href=`${(0,m.getBasePath)()}index.html`}})();
//# sourceMappingURL=home.abc9a233.js.map
