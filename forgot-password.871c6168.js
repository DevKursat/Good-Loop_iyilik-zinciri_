import"./home.6a421ab4.js";var e=globalThis,t={},a={},n=e.parcelRequire2757;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequire2757=n),(0,n.register)("8Wpxu",function(e,t){e.exports=import("6fEqA").then(()=>n("brE3Z"))}),n("6ZWSX"),n("hPtJY");var r=n("72z4V"),s=n("1XYd7"),i=n("2yfk2"),o=n("hPpH6"),l=n("aqcy4"),d=n("xBcsQ"),m=n("le7Hi"),c=n("baa6D");if(r.DefaultAmplify.configure(m&&m.__esModule?m.default:m),(async()=>{let e=window.location.pathname;if(!(e.endsWith("/")||e.endsWith("index.html")||e.includes("verify.html")||e.includes("forgot-password.html")))try{await (0,i.getCurrentUser)()}catch(e){window.location.href=(0,c.getBasePath)()+"index.html"}})(),window.location.pathname.endsWith("/")||window.location.pathname.endsWith("index.html")){let e=document.getElementById("auth-container-animated"),t=document.querySelector(".form-container.sign-in"),a=document.querySelector(".form-container.sign-up");if(window.innerWidth<=768){let e=document.querySelector(".toggle-container");e&&e.remove();let n=document.getElementById("show-login-mobile"),r=document.getElementById("show-signup-mobile");t.style.display="flex",a.style.display="none",r&&r.addEventListener("click",e=>{e.preventDefault(),t.style.display="none",a.style.display="flex"}),n&&n.addEventListener("click",e=>{e.preventDefault(),t.style.display="flex",a.style.display="none"})}else{let t=document.getElementById("register"),a=document.getElementById("login");t&&t.addEventListener("click",()=>e.classList.add("active")),a&&a.addEventListener("click",()=>e.classList.remove("active"))}let n=document.getElementById("signup-password"),r=document.getElementById("strength-meter-container"),s=document.getElementById("strength-bar"),o=document.getElementById("strength-text"),m=document.getElementById("signup-form");n&&(o.textContent="Kayıt Ol",n.addEventListener("input",()=>{let e=n.value,t=[{regex:/.{8,}/,message:"En az 8 karakter"},{regex:/[A-Z]/,message:"Büyük harf (A-Z)"},{regex:/[a-z]/,message:"Küçük harf (a-z)"},{regex:/[0-9]/,message:"Sayı (0-9)"},{regex:/[!@#$%^&*]/,message:"Özel karakter (!@#$%^&*)"}];if(0===e.length){o.textContent="Kayıt Ol",r.classList.remove("transformed"),s.style.width="0%",s.className="strength-bar";return}let a=0,i=null;t.forEach(t=>{t.regex.test(e)?a++:i||(i=t.message)});let l=a/t.length*100;s.style.width=`${l}%`,a===t.length?(o.textContent="Kayıt Ol",r.classList.add("transformed")):(o.textContent=`${a}/${t.length}: ${i||""}`,r.classList.remove("transformed")),s.className="strength-bar",100===l?s.classList.add("strong"):l>=60?s.classList.add("medium"):s.classList.add("weak")}),r.addEventListener("click",()=>{r.classList.contains("transformed")&&m.requestSubmit()}));let g=document.getElementById("login-email"),y=document.getElementById("login-password"),h=document.getElementById("login-button-container"),p=document.getElementById("login");function u(){let e=g.value,t=y.value;h.classList.toggle("transformed",e.length>0&&t.length>0)}g&&y&&(g.addEventListener("input",u),y.addEventListener("input",u)),h&&h.addEventListener("click",()=>{h.classList.contains("transformed")&&p.requestSubmit()}),p&&p.addEventListener("submit",async e=>{e.preventDefault();let t=g.value,a=y.value;try{await (0,l.signIn)({username:t,password:a});let{attributes:e}=await (0,i.getCurrentUser)();e["custom:setup_complete"]&&"evet"===e["custom:setup_complete"].toLowerCase()?window.location.href=`${(0,c.getBasePath)()}home.html`:window.location.href=`${(0,c.getBasePath)()}profile-setup.html`}catch(e){console.error("Giriş hatası:",e),y.classList.remove("input-error"),"UserNotConfirmedException"===e.name?window.location.href=`${(0,c.getBasePath)()}verify.html?email=${encodeURIComponent(t)}`:"NotAuthorizedException"===e.name?(y.classList.add("input-error"),setTimeout(()=>y.classList.remove("input-error"),500),alert("Kullanıcı adı veya şifre hatalı.")):alert(e.message)}}),m&&m.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("signup-email").value,a=n.value;try{await (0,d.signUp)({username:t,password:a,attributes:{email:t,emails:t}}),alert("Hesap başarıyla oluşturuldu! Doğrulama kodu e-postana gönderildi. Spam (gereksiz) klasörünü kontrol etmeyi unutma."),window.location.href=`${(0,c.getBasePath)()}verify.html?email=${encodeURIComponent(t)}`}catch(e){console.error("Kayıt hatası:",e),alert(e.message)}})}window.location.pathname.includes("verify.html")&&(async()=>{let{confirmSignUp:e,resendSignUpCode:t}=await n("8Wpxu"),a=document.getElementById("verify-email-display"),r=new URLSearchParams(window.location.search).get("email");r&&(a.textContent=r),document.getElementById("verify-form").addEventListener("submit",async t=>{t.preventDefault();let a=document.getElementById("verification-code").value;if(!r||!a)return alert("E-posta veya doğrulama kodu eksik.");try{await e({username:r,confirmationCode:a}),alert("E-posta başarıyla doğrulandı! Lütfen giriş yapın."),window.location.href=`${(0,c.getBasePath)()}index.html`}catch(e){console.error("Doğrulama hatası:",e),alert(e.message)}});let s=document.getElementById("resend-code-container"),i=["Bu sayfa tamamen güvenlidir.","E-posta ulaşmadıysa spam (gereksiz) klasörünüzü kontrol edin."],o=0;function l(){s.innerHTML=`
            <div id="resend-code-progress"></div>
            <div id="resend-code-text"></div>
        `;let e=document.getElementById("resend-code-progress"),t=document.getElementById("resend-code-text"),a=30;s.classList.remove("ready"),e.style.transition="none",e.style.width="0%";let n=setInterval(()=>{let r=(30- --a)/30*100;e.style.transition="width 1s linear",e.style.width=`${r}%`,t.textContent=`TEKRAR G\xd6NDER (${a}s)`,a<=0&&(clearInterval(n),s.classList.add("ready"),t.textContent="KODU TEKRAR GÖNDER")},1e3)}s.addEventListener("click",async()=>{if(s.classList.contains("ready")){if(!r)return alert("E-posta adresi bulunamadı.");try{await t({username:r}),alert("Doğrulama kodu tekrar gönderildi. Spam (gereksiz) klasörünü kontrol etmeyi unutma."),l()}catch(e){console.error("Kodu tekrar gönderme hatası:",e),alert(e.message)}}else alert(i[o]),o=(o+1)%i.length}),l()})(),window.location.pathname.includes("forgot-password.html")&&(async()=>{let e=document.getElementById("send-code-form"),t=document.getElementById("reset-password-form"),a=document.getElementById("reset-email");e.addEventListener("submit",async r=>{r.preventDefault();try{await (0,o.resetPassword)({username:a.value}),alert("Sıfırlama kodu e-postana gönderildi. Spam (gereksiz) klasörünü kontrol etmeyi unutma."),e.classList.add("hidden"),t.classList.remove("hidden")}catch(e){if(console.error("Şifre sıfırlama hatası:",e),"UserNotConfirmedException"===e.name||"InvalidParameterException"===e.name){let{resendSignUpCode:e}=await n("8Wpxu");try{await e({username:a.value}),alert("Şifrenizi doğrulamanız gerekiyor. Size yeni bir doğrulama kodu gönderdik, lütfen spam (gereksiz) klasörünüzü kontrol edin."),window.location.href=`${(0,c.getBasePath)()}verify.html?email=${encodeURIComponent(a.value)}`}catch(e){console.error("Doğrulama kodu gönderme hatası:",e),alert("Bir hata oluştu. Lütfen tekrar deneyin.")}}else alert(e.message)}}),t.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("reset-code").value,n=document.getElementById("new-password").value;try{await (0,s.confirmResetPassword)({username:a.value,confirmationCode:t,newPassword:n}),alert("Şifren başarıyla değiştirildi. Şimdi giriş yapabilirsin."),window.location.href=`${(0,c.getBasePath)()}index.html`}catch(e){console.error("Yeni şifre ayarlama hatası:",e),alert(e.message)}})})();
//# sourceMappingURL=forgot-password.871c6168.js.map
