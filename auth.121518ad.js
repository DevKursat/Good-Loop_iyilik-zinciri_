function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire2757,r=t.register;r("brE3Z",function(r,o){e(r.exports,"confirmResetPassword",()=>t("1XYd7").confirmResetPassword),e(r.exports,"confirmSignUp",()=>t("c7Zwg").confirmSignUp),e(r.exports,"fetchUserAttributes",()=>t("2Izdj").fetchUserAttributes),e(r.exports,"resendSignUpCode",()=>t("8XrSp").resendSignUpCode),e(r.exports,"resetPassword",()=>t("hPpH6").resetPassword),e(r.exports,"signIn",()=>t("aqcy4").signIn),e(r.exports,"signInWithRedirect",()=>t("1YUHk").signInWithRedirect),e(r.exports,"signUp",()=>t("xBcsQ").signUp),e(r.exports,"updateUserAttributes",()=>t("bykg2").updateUserAttributes),t("1XYd7"),t("c7Zwg"),t("2Izdj"),t("8XrSp"),t("hPpH6"),t("aqcy4"),t("1YUHk"),t("xBcsQ"),t("bykg2")}),r("c7Zwg",function(r,o){e(r.exports,"confirmSignUp",()=>A);var i=t("1qbEC"),n=t("bfiP6"),s=t("k2DuP"),a=t("5RCQ5"),l=t("7XpgE"),d=t("ewkqX"),u=t("hXC67"),p=t("aEls4"),c=t("7fUr4"),C=t("kDFKP"),g=t("eAu1N"),U=t("5XcLh"),f=t("epZMx");async function A(e){let{username:t,confirmationCode:r,options:o}=e,A=i.Amplify.getConfig().Auth?.Cognito;(0,n.assertTokenProviderConfig)(A);let{userPoolId:P,userPoolClientId:S,userPoolEndpoint:m}=A,I=o?.clientMetadata;(0,l.assertValidationError)(!!t,d.AuthValidationErrorCode.EmptyConfirmSignUpUsername),(0,l.assertValidationError)(!!r,d.AuthValidationErrorCode.EmptyConfirmSignUpCode);let E=(0,c.getUserContextData)({username:t,userPoolId:P,userPoolClientId:S}),b=(0,C.createConfirmSignUpClient)({endpointResolver:(0,g.createCognitoUserPoolEndpointResolver)({endpointOverride:m})}),{Session:v}=await b({region:(0,u.getRegionFromUserPoolId)(A.userPoolId),userAgentValue:(0,p.getAuthUserAgentValue)(s.AuthAction.ConfirmSignUp)},{Username:t,ConfirmationCode:r,ClientMetadata:I,ForceAliasCreation:o?.forceAliasCreation,ClientId:A.userPoolClientId,UserContextData:E});return new Promise((e,r)=>{try{let r={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},o=U.autoSignInStore.getState();if(!o.active||o.username!==t){e(r),(0,f.resetAutoSignIn)();return}U.autoSignInStore.dispatch({type:"SET_SESSION",value:v});let i=a.HubInternal.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),i())});a.HubInternal.dispatch("auth-internal",{event:"confirmSignUp",data:r})}catch(e){r(e)}})}}),r("kDFKP",function(r,o){e(r.exports,"createConfirmSignUpClient",()=>d);var i=t("6vbP8"),n=t("luL8F"),s=t("bdRfK"),a=t("2qp1o"),l=t("7OD1Z");let d=e=>(0,i.composeServiceApi)(s.cognitoUserPoolTransferHandler,(0,a.createUserPoolSerializer)("ConfirmSignUp"),(0,l.createUserPoolDeserializer)(),{...n.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e})}),r("8XrSp",function(r,o){e(r.exports,"resendSignUpCode",()=>g);var i=t("1qbEC"),n=t("bfiP6"),s=t("k2DuP"),a=t("7XpgE"),l=t("ewkqX"),d=t("hXC67"),u=t("aEls4"),p=t("7fUr4"),c=t("foJAH"),C=t("eAu1N");async function g(e){let{username:t}=e;(0,a.assertValidationError)(!!t,l.AuthValidationErrorCode.EmptySignUpUsername);let r=i.Amplify.getConfig().Auth?.Cognito;(0,n.assertTokenProviderConfig)(r);let{userPoolClientId:o,userPoolId:g,userPoolEndpoint:U}=r,f=e.options?.clientMetadata,A=(0,p.getUserContextData)({username:t,userPoolId:g,userPoolClientId:o}),P=(0,c.createResendConfirmationCodeClient)({endpointResolver:(0,C.createCognitoUserPoolEndpointResolver)({endpointOverride:U})}),{CodeDeliveryDetails:S}=await P({region:(0,d.getRegionFromUserPoolId)(r.userPoolId),userAgentValue:(0,u.getAuthUserAgentValue)(s.AuthAction.ResendSignUpCode)},{Username:t,ClientMetadata:f,ClientId:r.userPoolClientId,UserContextData:A}),{DeliveryMedium:m,AttributeName:I,Destination:E}={...S};return{destination:E,deliveryMedium:m,attributeName:I||void 0}}}),r("foJAH",function(r,o){e(r.exports,"createResendConfirmationCodeClient",()=>d);var i=t("6vbP8"),n=t("bdRfK"),s=t("2qp1o"),a=t("7OD1Z"),l=t("luL8F");let d=e=>(0,i.composeServiceApi)(n.cognitoUserPoolTransferHandler,(0,s.createUserPoolSerializer)("ResendConfirmationCode"),(0,a.createUserPoolDeserializer)(),{...l.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e})}),r("bykg2",function(r,o){e(r.exports,"updateUserAttributes",()=>g);var i=t("1qbEC"),n=t("kwYKv"),s=t("bfiP6"),a=t("k2DuP"),l=t("kOfpC"),d=t("hXC67"),u=t("ZiWkh"),p=t("aEls4"),c=t("kU6O7"),C=t("eAu1N");let g=async e=>{let{userAttributes:t,options:r}=e,o=i.Amplify.getConfig().Auth?.Cognito,g=r?.clientMetadata;(0,s.assertTokenProviderConfig)(o);let{userPoolEndpoint:U,userPoolId:f}=o,{tokens:A}=await (0,n.fetchAuthSession)({forceRefresh:!1});(0,l.assertAuthTokens)(A);let P=(0,c.createUpdateUserAttributesClient)({endpointResolver:(0,C.createCognitoUserPoolEndpointResolver)({endpointOverride:U})}),{CodeDeliveryDetailsList:S}=await P({region:(0,d.getRegionFromUserPoolId)(f),userAgentValue:(0,p.getAuthUserAgentValue)(a.AuthAction.UpdateUserAttributes)},{AccessToken:A.accessToken.toString(),ClientMetadata:g,UserAttributes:(0,u.toAttributeType)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:r,DeliveryMedium:o,Destination:i}=e;r&&(t[r]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:r,deliveryMedium:o,destination:i}}})}),t}(S)}}}),r("kwYKv",function(r,o){e(r.exports,"fetchAuthSession",()=>s);var i=t("1qbEC"),n=t("eL2i9");let s=e=>(0,n.fetchAuthSession)(i.Amplify,e)}),r("kU6O7",function(r,o){e(r.exports,"createUpdateUserAttributesClient",()=>d);var i=t("6vbP8"),n=t("bdRfK"),s=t("2qp1o"),a=t("7OD1Z"),l=t("luL8F");let d=e=>(0,i.composeServiceApi)(n.cognitoUserPoolTransferHandler,(0,s.createUserPoolSerializer)("UpdateUserAttributes"),(0,a.createUserPoolDeserializer)(),{...l.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e})});
//# sourceMappingURL=auth.121518ad.js.map
